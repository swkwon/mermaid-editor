<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mermaid Editor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/material-darker.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/monokai.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/dracula.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/nord.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/solarized.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/eclipse.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/idea.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/ambiance.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="app-header">
        <div class="header-content">
            <div class="logo">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                    <circle cx="20" cy="20" r="18" fill="url(#gradient1)"/>
                    <path d="M20 8L28 16L20 24L12 16L20 8Z" fill="white" opacity="0.9"/>
                    <path d="M20 16L28 24L20 32L12 24L20 16Z" fill="white" opacity="0.6"/>
                    <defs>
                        <linearGradient id="gradient1" x1="0" y1="0" x2="40" y2="40">
                            <stop offset="0%" stop-color="#56ab2f"/>
                            <stop offset="100%" stop-color="#a8e063"/>
                        </linearGradient>
                    </defs>
                </svg>
                <div class="title-group">
                    <h1>Mermaid Editor</h1>
                    <p class="subtitle">Create beautiful diagrams with ease</p>
                </div>
            </div>
            <div class="header-actions">
                <button id="dark-mode-toggle" class="theme-toggle-btn" title="Toggle dark mode">
                    <span class="sun-icon">‚òÄÔ∏è</span>
                    <span class="moon-icon">üåô</span>
                </button>
                <a href="https://mermaid.js.org/syntax/flowchart.html" target="_blank" class="help-link">
                    <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                        <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
                    </svg>
                    <span>Help</span>
                </a>
            </div>
        </div>
    </header>

    <div class="container split-container">
        <div id="editor-pane" class="split">
            <div class="editor-container">
                <div class="editor-header">
                    <label for="mermaid-input">Code:</label>
                    <div class="header-controls">
                        <select id="theme-selector">
                            <option value="material-darker">Material Darker</option>
                            <option value="monokai">Monokai</option>
                            <option value="dracula">Dracula</option>
                            <option value="nord">Nord</option>
                            <option value="solarized dark">Solarized Dark</option>
                            <option value="solarized light">Solarized Light</option>
                            <option value="eclipse">Eclipse</option>
                            <option value="idea">IntelliJ IDEA</option>
                            <option value="ambiance">Ambiance</option>
                        </select>
                        <select id="sample-selector">
                            <option value="" disabled selected>Insert Sample...</option>
                        <option value="flowchart">Flowchart</option>
                        <option value="sequence">Sequence Diagram</option>
                        <option value="class">Class Diagram</option>
                        <option value="state">State Diagram</option>
                        <option value="er">Entity Relationship Diagram</option>
                        <option value="journey">User Journey</option>
                        <option value="gantt">Gantt</option>
                        <option value="pie">Pie Chart</option>
                        <option value="quadrant">Quadrant Chart</option>
                        <option value="requirement">Requirement Diagram</option>
                        <option value="git">GitGraph</option>
                        <option value="c4">C4 Diagram</option>
                        <option value="mindmap">Mindmaps</option>
                        <option value="timeline">Timeline</option>
                        <option value="sankey">Sankey</option>
                        <option value="xy">XY Chart</option>
                        <option value="block">Block Diagram</option>
                        <option value="packet">Packet</option>
                        <option value="kanban">Kanban</option>
                        <option value="architecture">Architecture</option>
                        <option value="radar">Radar</option>
                        <option value="treemap">Treemap</option>
                    </select>
                    </div>
                </div>
                <div class="editor-wrapper">
                    <textarea id="mermaid-input" style="display:none;">
---
title: Hello Sequence
---
sequenceDiagram
    participant Alice
    participant Bob
    Alice->>John: Hello John, how are you?
    loop Healthcheck
        John->>John: Fight against hypochondria
    end
    Note right of John: Rational thoughts<br/>prevail...
    John-->>Alice: Great!
    John->>Bob: How about you?
    Bob-->>John: Jolly good!
</textarea>
                </div>
                <div class="toolbar">
                    <div class="toolbar-group">
                        <button id="copy-url-btn" class="btn btn-success" title="Share this diagram">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5zm-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z"/>
                            </svg>
                            <span>Share</span>
                        </button>
                    </div>
                    <div class="toolbar-group">
                        <button id="save-txt-btn" class="btn btn-secondary" title="Save diagram as text file">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1z"/>
                            </svg>
                            <span>Save</span>
                        </button>
                        <button id="load-txt-btn" class="btn btn-secondary" title="Load diagram from text file">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"/>
                            </svg>
                            <span>Load</span>
                        </button>
                        <input type="file" id="load-txt-input" accept=".txt,.mmd" style="display: none;">
                    </div>
                    <div class="toolbar-group export-group">
                        <div class="export-dropdown">
                            <button id="export-btn" class="btn btn-primary" title="Export diagram" aria-haspopup="true" aria-expanded="false">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                    <path d="M.5 2A1.5 1.5 0 0 1 2 0h8.293A1.5 1.5 0 0 1 11.5.439l3.061 3.06A1.5 1.5 0 0 1 15 4.793V14a2 2 0 0 1-2 2H2a1.5 1.5 0 0 1-1.5-1.5V2z"/>
                                    <path d="M8 5a.5.5 0 0 0-.5.5v3.793L6.354 8.646a.5.5 0 1 0-.708.708l2 2 .007.007a.497.497 0 0 0 .7-.007l2-2a.5.5 0 0 0-.707-.708L8.5 9.293V5.5A.5.5 0 0 0 8 5z"/>
                                </svg>
                                <span>Export</span>
                                <svg class="chevron" width="12" height="12" viewBox="0 0 16 16" fill="currentColor"><path d="M1.5 5.5l6 6 6-6" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/></svg>
                            </button>
                            <div id="export-menu" class="export-menu" role="menu" aria-hidden="true">
                                <button class="export-item" data-format="png" role="menuitem">PNG</button>
                                <button class="export-item" data-format="jpg" role="menuitem">JPG</button>
                                <button class="export-item" data-format="svg" role="menuitem">SVG</button>
                                <button class="export-item" data-format="pdf" role="menuitem">PDF</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="diagram-pane" class="split">
            <div class="diagram-container">
                <div class="diagram-header">
                    <button id="toggle-background-btn" class="pattern-toggle-btn" title="Toggle background pattern">
                        <span class="dot-icon">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <circle cx="4" cy="4" r="1.5"/>
                                <circle cx="12" cy="4" r="1.5"/>
                                <circle cx="4" cy="12" r="1.5"/>
                                <circle cx="12" cy="12" r="1.5"/>
                                <circle cx="8" cy="8" r="1.5"/>
                            </svg>
                        </span>
                        <span class="grid-icon">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <rect x="1" y="1" width="5.5" height="5.5" fill="none" stroke="currentColor" stroke-width="1.5"/>
                                <rect x="9.5" y="1" width="5.5" height="5.5" fill="none" stroke="currentColor" stroke-width="1.5"/>
                                <rect x="1" y="9.5" width="5.5" height="5.5" fill="none" stroke="currentColor" stroke-width="1.5"/>
                                <rect x="9.5" y="9.5" width="5.5" height="5.5" fill="none" stroke="currentColor" stroke-width="1.5"/>
                            </svg>
                        </span>
                    </button>
                    <button id="copy-image-btn" class="btn btn-secondary" title="Copy diagram to clipboard">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/>
                            <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/>
                        </svg>
                        <span>Copy</span>
                    </button>
                    <div class="zoom-controls">
                        <button id="zoom-out-btn" class="btn btn-secondary" title="Zoom out (Ctrl + -)">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                                <path d="M4 6.5h6a.5.5 0 0 1 0 1H4a.5.5 0 0 1 0-1z"/>
                            </svg>
                        </button>
                        <span id="zoom-level" class="zoom-level">100%</span>
                        <button id="zoom-in-btn" class="btn btn-secondary" title="Zoom in (Ctrl + +)">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                                <path d="M6.5 10a.5.5 0 0 1-.5-.5v-3h-3a.5.5 0 0 1 0-1h3v-3a.5.5 0 0 1 1 0v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-.5.5z"/>
                            </svg>
                        </button>
                        <button id="zoom-reset-btn" class="btn btn-secondary" title="Reset zoom (Ctrl + 0)">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"/>
                                <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div id="mermaid-diagram"></div>
            </div>
        </div>
    </div>

    <div id="mermaid-temp" style="display: none; position: absolute; left: -9999px;"></div>
    <div id="toast-notification"></div>

    <script src="https://unpkg.com/split.js/dist/split.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/svg-pan-zoom@3.6.1/dist/svg-pan-zoom.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/selection/active-line.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/yaml/yaml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
